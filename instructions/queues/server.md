# üêá RabbitMQ: —Å–µ—Ä–≤–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π

## –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω
- –•—Ä–∞–Ω–∏—Ç —Å–æ–±—ã—Ç–∏—è Bitrix24 –∏ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏, —á—Ç–æ–±—ã —Ä–∞–∑–≥—Ä—É–∑–∏—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –ø—Ä–æ—Ñ–∏–ª–µ `queue`, –ø–æ—ç—Ç–æ–º—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É.

## –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `make dev-init`.
2. –û—Ç–≤–µ—Ç—å—Ç–µ ¬´y¬ª –Ω–∞ –≤–æ–ø—Ä–æ—Å ¬´–í–∫–ª—é—á–∏—Ç—å RabbitMQ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á?¬ª.
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äì —Å–∫—Ä–∏–ø—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å –∏ prefetch, –ø–æ–∫–∞–∂–µ—Ç –∏—Ö –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏ –≤–Ω–µ—Å—ë—Ç –≤ `.env`.
   - **–í—Ä—É—á–Ω—É—é** ‚Äì –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

–§–ª–∞–≥–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```
ENABLE_RABBITMQ=1
RABBITMQ_USER=queue_xxx
RABBITMQ_PASSWORD=***
RABBITMQ_PREFETCH=5
RABBITMQ_DSN=amqp://queue_xxx:...@rabbitmq:5672/%2f
```

## Docker Compose
- –°–µ—Ä–≤–∏—Å `rabbitmq` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—Ä–∞–∑ `rabbitmq:3.13-management-alpine`, –ø–æ—Ä—Ç—ã `5672` –∏ `15672`.
- –¢–æ–º `rabbitmq_data` —Ö—Ä–∞–Ω–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, `logs/rabbitmq/` ‚Äì –ª–æ–≥–∏.
- –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å `queue` –∫–æ –≤—Å–µ–º —Å—Ç–µ–∫–∞–º, –≥–¥–µ –Ω—É–∂–Ω–∞ –æ—á–µ—Ä–µ–¥—å.

## –î–æ—Å—Ç—É–ø
- AMQP: `amqp://rabbitmq:5672`
- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: <http://localhost:15672> (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—Ä–µ–¥—ã –∏–∑ `.env`)

## –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- `make queue-up` ‚Äî —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å RabbitMQ (–ø–æ–¥—Ç—è–Ω–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å `queue`, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫ –≤—ã–∫–ª—é—á–µ–Ω).
- `make queue-down` ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ RabbitMQ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.
- –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –∑–∞–¥–∞–Ω–æ `ENABLE_RABBITMQ=1`, –∏–Ω–∞—á–µ —Å–µ—Ä–≤–∏—Å –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è, –Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—ç–∫–µ–Ω–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Å—Ç–µ–∫–æ–º:
  - [PHP + Messenger](./php.md)
  - [Python + Celery](./python.md)
  - [Node.js + amqplib](./node.md)

